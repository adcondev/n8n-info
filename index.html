<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arquitectura n8n + PostgreSQL - Infograf√≠a Interactiva</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <!-- Mermaid.js -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'dark',
            themeVariables: {
                primaryColor: '#1e3a8a',
                primaryTextColor: '#fff',
                primaryBorderColor: '#3b82f6',
                lineColor: '#10b981',
                secondaryColor: '#1f2937',
                tertiaryColor: '#374151'
            }
        });
    </script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
        }
        
        .gradient-text {
            background: linear-gradient(90deg, #10b981 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .card {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(16, 185, 129, 0.2);
            border-color: rgba(16, 185, 129, 0.5);
        }
        
        .icon-box {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.4);
        }
        
        .code-block {
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 0.5rem;
            padding: 1.5rem;
            position: relative;
            overflow-x: auto;
        }
        
        .code-block::before {
            content: '$ ';
            color: #10b981;
            font-weight: bold;
        }
        
        .terminal-header {
            background: #1e293b;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem 0.5rem 0 0;
            border-bottom: 1px solid #334155;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .dot-red { background: #ef4444; }
        .dot-yellow { background: #eab308; }
        .dot-green { background: #10b981; }
        
        .warning-box {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid #ef4444;
            padding: 1rem;
            border-radius: 0.5rem;
        }
        
        .success-box {
            background: rgba(16, 185, 129, 0.1);
            border-left: 4px solid #10b981;
            padding: 1rem;
            border-radius: 0.5rem;
        }
        
        .hero-pattern {
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(16, 185, 129, 0.1) 0%, transparent 50%);
        }
        
        .section-divider {
            height: 2px;
            background: linear-gradient(90deg, transparent 0%, #10b981 50%, transparent 100%);
            margin: 4rem 0;
        }
        
        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(16, 185, 129, 0.4);
            }
            50% {
                box-shadow: 0 0 40px rgba(16, 185, 129, 0.8);
            }
        }
        
        .mermaid {
            background: rgba(15, 23, 42, 0.5);
            border-radius: 1rem;
            padding: 2rem;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        .scroll-hint {
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
    </style>
</head>
<body class="antialiased">
    
    <!-- Hero Section -->
    <section class="hero-pattern min-h-screen flex items-center justify-center px-4 py-20">
        <div class="max-w-5xl mx-auto text-center">
            <div class="mb-8">
                <i class="fas fa-server text-6xl gradient-text mb-4"></i>
            </div>
            <h1 class="text-5xl md:text-7xl font-bold mb-6 leading-tight">
                Arquitectura <span class="gradient-text">n8n + PostgreSQL</span>
            </h1>
            <p class="text-xl md:text-2xl text-gray-400 mb-8 max-w-3xl mx-auto">
                El problema de <span class="text-red-400 font-semibold">SQLite en Render</span> y c√≥mo <span class="text-green-400 font-semibold">PostgreSQL</span> lo soluciona üíæ
            </p>
            <p class="text-lg text-gray-500 mb-12 max-w-2xl mx-auto">
                Una gu√≠a visual sobre por qu√© perd√≠as tus datos en Render y c√≥mo PostgreSQL garantiza su persistencia
            </p>
            <div class="scroll-hint">
                <i class="fas fa-chevron-down text-3xl text-green-400"></i>
            </div>
        </div>
    </section>

    <!-- Main Content Container -->
    <div class="max-w-6xl mx-auto px-4 py-12">
        
        <!-- The Problem Section -->
        <section class="mb-20">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">
                    <i class="fas fa-exclamation-triangle text-red-400 mr-3"></i>
                    El Problema: SQLite en Render
                </h2>
                <p class="text-xl text-gray-400">¬øPor qu√© desaparec√≠an tus datos?</p>
            </div>
            
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Problem Card 1 -->
                <div class="card rounded-xl p-8">
                    <div class="icon-box bg-gradient-to-br from-red-600 to-red-800">
                        <i class="fas fa-database text-4xl text-white"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4 text-center text-red-400">SQLite en Render</h3>
                    <p class="text-gray-300 text-lg leading-relaxed">
                        SQLite guarda los datos en un <strong class="text-yellow-400">archivo dentro del contenedor</strong>. 
                        En Render, los contenedores son <strong class="text-red-400">ef√≠meros</strong> - se destruyen con cada actualizaci√≥n.
                    </p>
                    <div class="mt-6 p-4 bg-red-900/20 rounded-lg border border-red-600/30">
                        <p class="text-red-300 text-center font-semibold">
                            <i class="fas fa-fire mr-2"></i>
                            Contenedor reinicia = Datos perdidos
                        </p>
                    </div>
                </div>
                
                <!-- Problem Card 2 -->
                <div class="card rounded-xl p-8">
                    <div class="icon-box bg-gradient-to-br from-orange-600 to-orange-800">
                        <i class="fas fa-recycle text-4xl text-white"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4 text-center text-orange-400">Render Reinicia Siempre</h3>
                    <p class="text-gray-300 text-lg leading-relaxed">
                        Render recrea los contenedores frecuentemente: por <strong class="text-orange-400">actualizaciones</strong>, 
                        <strong class="text-purple-400">cambios de configuraci√≥n</strong>, o simplemente por mantenimiento del servicio.
                    </p>
                    <div class="mt-6 p-4 bg-orange-900/20 rounded-lg border border-orange-600/30">
                        <p class="text-orange-300 text-center font-semibold">
                            <i class="fas fa-trash-alt mr-2"></i>
                            Cada reinicio = SQLite se borra
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="warning-box mt-8">
                <div class="flex items-start gap-4">
                    <i class="fas fa-exclamation-circle text-3xl text-red-400 flex-shrink-0"></i>
                    <div>
                        <h4 class="text-xl font-bold text-red-400 mb-2">El Ciclo de P√©rdida en Render</h4>
                        <p class="text-gray-300 text-lg">
                            1. Despliegas n8n con SQLite en Render<br>
                            2. Creas workflows y guardas credenciales<br>
                            3. Render reinicia el contenedor (actualizaci√≥n, mantenimiento, etc.)<br>
                            4. <strong class="text-red-400">Todo desaparece</strong> - el archivo SQLite se destruye<br>
                            5. Vuelves a empezar desde cero üò¢
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- Why Everything Disappeared Section -->
        <section class="mb-20">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">
                    <i class="fas fa-fish text-blue-400 mr-3"></i>
                    ¬øPor qu√© desapareci√≥ todo?
                </h2>
                <p class="text-xl text-gray-400">El crimen de la "Memoria de Pez" en Render</p>
            </div>

            <!-- Render Problem Explanation -->
            <div class="card rounded-xl p-8 mb-8">
                <h3 class="text-2xl font-bold mb-6 flex items-center gap-3">
                    <i class="fas fa-hotel text-yellow-400"></i>
                    1. El problema de la "Memoria de Pez" (SQLite en Render)
                </h3>
                
                <div class="space-y-6">
                    <div>
                        <h4 class="text-xl font-semibold text-blue-400 mb-3">El Escenario:</h4>
                        <p class="text-gray-300 text-lg leading-relaxed">
                            Render (y muchos servicios cloud) tratan a los contenedores como <strong class="text-red-400">ef√≠meros</strong>. 
                            Piensa en ellos como habitaciones de hotel.
                        </p>
                    </div>
                    
                    <div>
                        <h4 class="text-xl font-semibold text-purple-400 mb-3">SQLite:</h4>
                        <p class="text-gray-300 text-lg leading-relaxed">
                            Es un archivo (<code class="bg-gray-800 px-2 py-1 rounded text-yellow-400">database.sqlite</code>) 
                            que vive <em>dentro</em> de esa habitaci√≥n.
                        </p>
                    </div>
                    
                    <div class="warning-box">
                        <div class="flex items-start gap-4">
                            <i class="fas fa-fire text-3xl text-red-400 flex-shrink-0"></i>
                            <div>
                                <h4 class="text-xl font-bold text-red-400 mb-2">El Desastre:</h4>
                                <p class="text-gray-300 text-lg">
                                    Cuando Render hace un "re-deploy" (actualizaci√≥n o reinicio), es como si hiciera el <em>checkout</em> 
                                    del hotel y quemara la habitaci√≥n. Todo lo que estaba adentro (el archivo SQLite con sus flujos y ejecuciones) 
                                    se destruye. Se crea una habitaci√≥n nueva, limpia y <strong class="text-red-400">vac√≠a</strong>.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PostgreSQL Solution -->
            <div class="card rounded-xl p-8 mb-8">
                <h3 class="text-2xl font-bold mb-6 flex items-center gap-3">
                    <i class="fas fa-shield-alt text-green-400"></i>
                    2. La Soluci√≥n: PostgreSQL (El Cerebro Externo)
                </h3>
                
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="bg-purple-900/20 border border-purple-600/30 rounded-lg p-6">
                        <div class="text-4xl mb-3">üêò</div>
                        <h4 class="text-lg font-bold text-purple-400 mb-2">Postgres</h4>
                        <p class="text-gray-300">
                            En lugar de guardar los datos dentro de la habitaci√≥n (contenedor), contratamos una caja fuerte externa blindada.
                        </p>
                    </div>
                    
                    <div class="bg-blue-900/20 border border-blue-600/30 rounded-lg p-6">
                        <div class="text-4xl mb-3">üîå</div>
                        <h4 class="text-lg font-bold text-blue-400 mb-2">La Conexi√≥n</h4>
                        <p class="text-gray-300">
                            n8n (la aplicaci√≥n) se conecta por un "cable" (red interna) a esta caja fuerte.
                        </p>
                    </div>
                    
                    <div class="bg-green-900/20 border border-green-600/30 rounded-lg p-6">
                        <div class="text-4xl mb-3">‚úÖ</div>
                        <h4 class="text-lg font-bold text-green-400 mb-2">El Resultado</h4>
                        <p class="text-gray-300">
                            Si n8n se reinicia, se actualiza o explota, no importa. Al volver a encenderse, se conecta a la caja fuerte y ah√≠ est√° todo.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Encryption Key Warning -->
            <div class="warning-box">
                <div class="flex items-start gap-4">
                    <i class="fas fa-key text-3xl text-yellow-400 flex-shrink-0"></i>
                    <div>
                        <h4 class="text-xl font-bold text-yellow-400 mb-3">
                            <i class="fas fa-exclamation-triangle mr-2"></i>
                            3. La Llave Maestra (N8N_ENCRYPTION_KEY)
                        </h4>
                        <p class="text-gray-300 text-lg mb-3">
                            Esta variable es la llave de la caja fuerte. Si reinstalan todo pero pierden esta clave, 
                            <strong class="text-red-400">perder√°n el acceso a todas las credenciales</strong> (APIs, contrase√±as) 
                            guardadas en n8n, aunque tengan la base de datos.
                        </p>
                        <p class="text-yellow-300 text-xl font-bold text-center mt-4">
                            ¬°Gu√°rdenla como oro!
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- The Solution Section -->
        <section class="mb-20">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">
                    <i class="fas fa-lightbulb text-green-400 mr-3"></i>
                    La Soluci√≥n: PostgreSQL
                </h2>
                <p class="text-xl text-gray-400">Persistencia garantizada, sin importar cu√°ntas veces reinicie</p>
            </div>
            
            <div class="success-box mb-8">
                <div class="flex items-start gap-4">
                    <i class="fas fa-check-circle text-3xl text-green-400 flex-shrink-0"></i>
                    <div>
                        <h4 class="text-xl font-bold text-green-400 mb-2">PostgreSQL: La Caja Fuerte Externa</h4>
                        <p class="text-gray-300 text-lg">
                            PostgreSQL guarda tus datos <strong class="text-green-400">fuera del contenedor de n8n</strong>, 
                            ya sea en un volumen Docker persistente o como servicio independiente en Render.
                            <strong class="text-blue-400">Tus datos sobreviven a cualquier reinicio</strong>.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Solution Card 1: Container -->
                <div class="card rounded-xl p-8 pulse-glow">
                    <div class="icon-box bg-gradient-to-br from-green-600 to-green-800">
                        <i class="fas fa-box text-4xl text-white"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4 text-center text-green-400">Como Contenedor Docker</h3>
                    <p class="text-gray-300 text-lg leading-relaxed text-center">
                        Usando <strong class="text-green-400">docker-compose</strong>, PostgreSQL corre en un contenedor separado 
                        con <strong class="text-blue-400">vol√∫menes persistentes</strong>. Los datos se guardan en el disco f√≠sico de tu servidor.
                    </p>
                    <div class="mt-6 text-center">
                        <span class="inline-block px-4 py-2 bg-green-600/20 rounded-full text-green-300 font-semibold">
                            ‚úì Datos Persistentes
                        </span>
                    </div>
                </div>
                
                <!-- Solution Card 2: Render Service -->
                <div class="card rounded-xl p-8 pulse-glow">
                    <div class="icon-box bg-gradient-to-br from-purple-600 to-purple-800">
                        <i class="fas fa-cloud text-4xl text-white"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4 text-center text-purple-400">Como Servicio en Render</h3>
                    <p class="text-gray-300 text-lg leading-relaxed text-center">
                        Render ofrece <strong class="text-purple-400">PostgreSQL como servicio</strong> completamente independiente. 
                        n8n se conecta a esta base de datos externa y <strong class="text-green-400">tus datos est√°n siempre seguros</strong>.
                    </p>
                    <div class="mt-6 text-center">
                        <span class="inline-block px-4 py-2 bg-purple-600/20 rounded-full text-purple-300 font-semibold">
                            ‚úì Separaci√≥n Total
                        </span>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- Architecture Diagram Section -->
        <section class="mb-20">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">
                    <i class="fas fa-project-diagram text-blue-400 mr-3"></i>
                    Arquitectura del Sistema
                </h2>
                <p class="text-xl text-gray-400">C√≥mo se separan las "cajas" (servicios) para proteger tu informaci√≥n</p>
            </div>
            
            <div class="card rounded-xl p-8 mb-8">
                <pre class="mermaid">
graph TD
    subgraph SERVER ["Servidor / Docker Host"]
        style SERVER fill:#f9f9f9,stroke:#333,stroke-width:2px
        
        subgraph NETWORK ["Red Interna Privada"]
            style NETWORK fill:#e1f5fe,stroke:#0277bd,stroke-dasharray: 5 5
            
            N8N[("üöÄ Contenedor n8n<br/>(Procesamiento / Stateless)")]
            PG[("üêò Contenedor PostgreSQL<br/>(Base de Datos / Stateful)")]
        end

        DISK[("üíæ Disco F√≠sico del Servidor<br/>(Volumen Docker)")]
        
        N8N -- "Lee/Escribe Datos (Puerto 5432)" --> PG
        PG -- "Guarda Datos Permanentemente" --> DISK
        
        style N8N fill:#ff6b6b,stroke:#c0392b,color:white
        style PG fill:#3498db,stroke:#2980b9,color:white
        style DISK fill:#2ecc71,stroke:#27ae60,color:white
    end
    
    INTERNET((Internet)) --> N8N
                </pre>
            </div>
            
            <div class="grid md:grid-cols-3 gap-6">
                <div class="bg-red-900/20 border border-red-600/30 rounded-lg p-6">
                    <div class="text-4xl mb-3">üöÄ</div>
                    <h4 class="text-lg font-bold text-red-400 mb-2">n8n</h4>
                    <p class="text-gray-400 text-sm">Puede reiniciarse sin perder datos</p>
                </div>
                <div class="bg-blue-900/20 border border-blue-600/30 rounded-lg p-6">
                    <div class="text-4xl mb-3">üêò</div>
                    <h4 class="text-lg font-bold text-blue-400 mb-2">PostgreSQL</h4>
                    <p class="text-gray-400 text-sm">Base de datos externa persistente</p>
                </div>
                <div class="bg-green-900/20 border border-green-600/30 rounded-lg p-6">
                    <div class="text-4xl mb-3">üíæ</div>
                    <h4 class="text-lg font-bold text-green-400 mb-2">Volumen Docker</h4>
                    <p class="text-gray-400 text-sm">Datos seguros en el disco f√≠sico</p>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- Quick Start Section -->
        <section class="mb-20">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">
                    <i class="fas fa-terminal text-green-400 mr-3"></i>
                    Gu√≠a de Inicio R√°pido
                </h2>
                <p class="text-xl text-gray-400">Despliega en minutos con estos pasos</p>
            </div>
            
            <!-- Prerequisites -->
            <div class="card rounded-xl p-8 mb-8">
                <h3 class="text-2xl font-bold mb-6 flex items-center gap-3">
                    <i class="fas fa-clipboard-check text-yellow-400"></i>
                    Requisitos Previos
                </h3>
                <ul class="space-y-3 text-lg text-gray-300">
                    <li class="flex items-start gap-3">
                        <i class="fas fa-check text-green-400 mt-1"></i>
                        <span>Docker y Docker Compose instalados en tu servidor</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <i class="fas fa-check text-green-400 mt-1"></i>
                        <span>Un dominio configurado apuntando a tu servidor (opcional, pero recomendado para webhooks)</span>
                    </li>
                </ul>
            </div>
            
            <!-- Step 1: Clone -->
            <div class="card rounded-xl p-8 mb-8">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center font-bold text-white">1</div>
                    <h3 class="text-2xl font-bold">Clonar el repositorio</h3>
                </div>
                <div class="terminal-header">
                    <div class="terminal-dot dot-red"></div>
                    <div class="terminal-dot dot-yellow"></div>
                    <div class="terminal-dot dot-green"></div>
                    <span class="text-gray-400 text-sm ml-2">Terminal</span>
                </div>
                <div class="code-block">
                    <code class="text-green-400 font-mono">git clone https://github.com/tu-usuario/tu-repo.git</code>
                </div>
                <div class="code-block mt-3">
                    <code class="text-green-400 font-mono">cd tu-repo</code>
                </div>
            </div>
            
            <!-- Step 2: Configure -->
            <div class="card rounded-xl p-8 mb-8">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 rounded-full bg-purple-600 flex items-center justify-center font-bold text-white">2</div>
                    <h3 class="text-2xl font-bold">Configurar variables de entorno</h3>
                </div>
                <p class="text-gray-300 mb-4 text-lg">Copia el archivo de ejemplo para crear tu configuraci√≥n real:</p>
                <div class="terminal-header">
                    <div class="terminal-dot dot-red"></div>
                    <div class="terminal-dot dot-yellow"></div>
                    <div class="terminal-dot dot-green"></div>
                    <span class="text-gray-400 text-sm ml-2">Terminal</span>
                </div>
                <div class="code-block">
                    <code class="text-green-400 font-mono">cp .env.example .env</code>
                </div>
                
                <div class="warning-box mt-6">
                    <div class="flex items-start gap-4">
                        <i class="fas fa-key text-3xl text-yellow-400 flex-shrink-0"></i>
                        <div>
                            <h4 class="text-xl font-bold text-yellow-400 mb-3">‚ö†Ô∏è IMPORTANTE: N8N_ENCRYPTION_KEY</h4>
                            <p class="text-gray-300 text-lg mb-3">
                                Esta clave se usa para cifrar tus credenciales (Google, Slack, AWS, etc.).
                            </p>
                            <ul class="space-y-2 text-gray-300">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-shield-alt text-yellow-400 mt-1"></i>
                                    <span>Genera una clave segura y <strong class="text-yellow-300">gu√°rdala en un gestor de contrase√±as</strong></span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-exclamation-triangle text-red-400 mt-1"></i>
                                    <span>Si pierdes esta clave, perder√°s el acceso a todas las cuentas conectadas en n8n</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <p class="text-gray-300 mt-6 mb-4 text-lg">Genera una clave segura ejecutando esto en tu terminal:</p>
                <div class="terminal-header">
                    <div class="terminal-dot dot-red"></div>
                    <div class="terminal-dot dot-yellow"></div>
                    <div class="terminal-dot dot-green"></div>
                    <span class="text-gray-400 text-sm ml-2">Terminal</span>
                </div>
                <div class="code-block">
                    <code class="text-green-400 font-mono"># Opci√≥n A (si tienes openssl)</code>
                </div>
                <div class="code-block mt-1">
                    <code class="text-green-400 font-mono">openssl rand -base64 24</code>
                </div>
                <div class="mt-4 p-4 bg-gray-800/50 rounded-lg border border-gray-700">
                    <p class="text-gray-400 text-sm">
                        <i class="fas fa-info-circle text-blue-400 mr-2"></i>
                        <strong>Opci√≥n B:</strong> Cualquier generador de contrase√±as seguro funciona
                    </p>
                </div>
            </div>
            
            <!-- Step 3: Launch -->
            <div class="card rounded-xl p-8 mb-8">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 rounded-full bg-green-600 flex items-center justify-center font-bold text-white">3</div>
                    <h3 class="text-2xl font-bold">Iniciar el servicio</h3>
                </div>
                <p class="text-gray-300 mb-4 text-lg">Arranca los contenedores en segundo plano:</p>
                <div class="terminal-header">
                    <div class="terminal-dot dot-red"></div>
                    <div class="terminal-dot dot-yellow"></div>
                    <div class="terminal-dot dot-green"></div>
                    <span class="text-gray-400 text-sm ml-2">Terminal</span>
                </div>
                <div class="code-block">
                    <code class="text-green-400 font-mono">docker compose up -d</code>
                </div>
                
                <div class="success-box mt-6">
                    <div class="flex items-start gap-4">
                        <i class="fas fa-check-circle text-3xl text-green-400 flex-shrink-0"></i>
                        <div>
                            <h4 class="text-xl font-bold text-green-400 mb-2">¬°Listo! üéâ</h4>
                            <p class="text-gray-300 text-lg">
                                Tu instancia de n8n estar√° disponible en <code class="bg-gray-800 px-2 py-1 rounded text-blue-400">https://tu-dominio.com</code>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Maintenance Section -->
            <div class="card rounded-xl p-8">
                <h3 class="text-2xl font-bold mb-6 flex items-center gap-3">
                    <i class="fas fa-wrench text-orange-400"></i>
                    Mantenimiento
                </h3>
                
                <div class="space-y-6">
                    <!-- View Logs -->
                    <div>
                        <h4 class="text-xl font-semibold text-blue-400 mb-3 flex items-center gap-2">
                            <i class="fas fa-file-alt"></i>
                            Ver logs (para depuraci√≥n)
                        </h4>
                        <p class="text-gray-300 mb-3">Si algo falla, puedes ver qu√© est√° pasando dentro de los contenedores:</p>
                        <div class="terminal-header">
                            <div class="terminal-dot dot-red"></div>
                            <div class="terminal-dot dot-yellow"></div>
                            <div class="terminal-dot dot-green"></div>
                            <span class="text-gray-400 text-sm ml-2">Terminal</span>
                        </div>
                        <div class="code-block">
                            <code class="text-green-400 font-mono">docker compose logs -f</code>
                        </div>
                    </div>
                    
                    <!-- Update n8n -->
                    <div>
                        <h4 class="text-xl font-semibold text-purple-400 mb-3 flex items-center gap-2">
                            <i class="fas fa-sync-alt"></i>
                            Actualizar n8n
                        </h4>
                        <p class="text-gray-300 mb-3">Para obtener la √∫ltima versi√≥n de n8n sin perder datos (gracias a esta arquitectura):</p>
                        <div class="terminal-header">
                            <div class="terminal-dot dot-red"></div>
                            <div class="terminal-dot dot-yellow"></div>
                            <div class="terminal-dot dot-green"></div>
                            <span class="text-gray-400 text-sm ml-2">Terminal</span>
                        </div>
                        <div class="code-block">
                            <code class="text-green-400 font-mono">docker compose pull</code>
                        </div>
                        <div class="code-block mt-1">
                            <code class="text-green-400 font-mono">docker compose up -d</code>
                        </div>
                    </div>
                    
                    <!-- Backups -->
                    <div>
                        <h4 class="text-xl font-semibold text-green-400 mb-3 flex items-center gap-2">
                            <i class="fas fa-save"></i>
                            Copias de Seguridad (Backups)
                        </h4>
                        <p class="text-gray-300">
                            Aunque Postgres es seguro, siempre es bueno tener un respaldo. Con esta configuraci√≥n, 
                            solo necesitas respaldar el volumen llamado <code class="bg-gray-800 px-2 py-1 rounded text-yellow-400">postgres_data</code> 
                            o usar <code class="bg-gray-800 px-2 py-1 rounded text-yellow-400">pg_dump</code> desde fuera.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- Docker Compose Code Section -->
        <section class="mb-20">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">
                    <i class="fas fa-code text-blue-400 mr-3"></i>
                    El C√≥digo Simplificado
                </h2>
                <p class="text-xl text-gray-400">docker-compose.yml - Solo n8n + PostgreSQL</p>
            </div>

            <div class="card rounded-xl p-8 mb-8">
                <p class="text-gray-300 text-lg mb-6 leading-relaxed">
                    Este archivo despliega <strong class="text-blue-400">n8n + PostgreSQL</strong> de forma simple, 
                    sin proxies reversos ni complejidades adicionales. Solo dos servicios: n8n y la base de datos.
                </p>

                <div class="terminal-header">
                    <div class="terminal-dot dot-red"></div>
                    <div class="terminal-dot dot-yellow"></div>
                    <div class="terminal-dot dot-green"></div>
                    <span class="text-gray-400 text-sm ml-2">docker-compose.yml</span>
                </div>
                <div class="bg-gray-900 rounded-b-lg p-6 overflow-x-auto border border-gray-700">
                    <pre class="text-sm text-gray-300 font-mono leading-relaxed"><code>services:
  <span class="text-yellow-400">#################################################################
  # SERVICIO 1: PostgreSQL (La soluci√≥n al problema de SQLite)
  #################################################################</span>
  postgres:
    image: postgres:17-alpine
    restart: unless-stopped
    
    environment:
      - POSTGRES_USER=${POSTGRES_USER}
      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
      - POSTGRES_DB=${POSTGRES_DB}
    
    <span class="text-green-400"># üíæ CLAVE: Volumen persistente</span>
    <span class="text-gray-500"># Los datos se guardan en el disco, NO en el contenedor</span>
    volumes:
      - postgres_data:/var/lib/postgresql/data
    
    networks:
      - n8n-internal
    
    <span class="text-gray-500"># Verificaci√≥n de salud</span>
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${POSTGRES_USER} -d ${POSTGRES_DB}"]
      start_period: 30s
      interval: 10s
      timeout: 5s
      retries: 5

  <span class="text-yellow-400">#################################################################
  # SERVICIO 2: n8n (La aplicaci√≥n)
  #################################################################</span>
  n8n:
    image: n8nio/n8n:latest
    restart: unless-stopped
    
    <span class="text-gray-500"># Puerto expuesto para acceder a n8n</span>
    ports:
      - "5678:5678"
    
    environment:
      <span class="text-red-400"># Configuraci√≥n para usar PostgreSQL (NO SQLite)</span>
      - DB_TYPE=postgresdb
      - DB_POSTGRESDB_HOST=postgres
      - DB_POSTGRESDB_PORT=5432
      - DB_POSTGRESDB_DATABASE=${POSTGRES_DB}
      - DB_POSTGRESDB_USER=${POSTGRES_USER}
      - DB_POSTGRESDB_PASSWORD=${POSTGRES_PASSWORD}
      
      <span class="text-yellow-400"># Llave de encriptaci√≥n (¬°Gu√°rdala!)</span>
      - N8N_ENCRYPTION_KEY=${N8N_ENCRYPTION_KEY}
      
      <span class="text-gray-500"># Configuraci√≥n general</span>
      - N8N_HOST=${N8N_HOST}
      - N8N_PORT=5678
      - N8N_PROTOCOL=https
      - NODE_ENV=production
      - WEBHOOK_URL=https://${N8N_HOST}/
      - GENERIC_TIMEZONE=${GENERIC_TIMEZONE}
      
    volumes:
      - n8n_data:/home/node/.n8n
      
    networks:
      - n8n-internal
    
    <span class="text-gray-500"># Espera a que PostgreSQL est√© lista</span>
    depends_on:
      postgres:
        condition: service_healthy

<span class="text-yellow-400">#################################################################
# INFRAESTRUCTURA
#################################################################</span>
networks:
  n8n-internal:
    driver: bridge

volumes:
  n8n_data:
  postgres_data:  <span class="text-green-400"># ¬°Datos persistentes aqu√≠!</span></code></pre>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- .env File Section -->
        <section class="mb-20">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">
                    <i class="fas fa-file-alt text-green-400 mr-3"></i>
                    El Archivo .env
                </h2>
                <p class="text-xl text-gray-400">Configuraci√≥n de Variables (Secreto)</p>
            </div>

            <div class="card rounded-xl p-8 mb-8">
                <div class="warning-box mb-6">
                    <div class="flex items-start gap-4">
                        <i class="fas fa-lock text-3xl text-red-400 flex-shrink-0"></i>
                        <div>
                            <h4 class="text-xl font-bold text-red-400 mb-2">
                                <i class="fas fa-exclamation-triangle mr-2"></i>
                                Este archivo es secreto
                            </h4>
                            <p class="text-gray-300 text-lg">
                                Nunca debe compartirse p√∫blicamente. Aqu√≠ definimos los valores reales.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="terminal-header">
                    <div class="terminal-dot dot-red"></div>
                    <div class="terminal-dot dot-yellow"></div>
                    <div class="terminal-dot dot-green"></div>
                    <span class="text-gray-400 text-sm ml-2">.env</span>
                </div>
                <div class="bg-gray-900 rounded-b-lg p-6 overflow-x-auto border border-gray-700">
                    <pre class="text-sm text-gray-300 font-mono leading-relaxed"><code><span class="text-gray-500"># Dominio donde vivir√° la app</span>
N8N_HOST=n8n.adcon.dev
N8N_PORT=5678

<span class="text-gray-500"># Zona horaria (Muy importante para automatizaciones que corren a cierta hora)</span>
GENERIC_TIMEZONE=America/Mazatlan

<span class="text-gray-500"># Credenciales de la Base de Datos (El usuario y pass que usar√° Postgres)</span>
POSTGRES_USER=alba_crooks
POSTGRES_PASSWORD=jkhivqakg3m2zmzhw8v3hwzu
POSTGRES_DB=n8n

<span class="text-yellow-400"># ¬°LA LLAVE MAESTRA! </span>
<span class="text-gray-500"># Si pierdes esto, pierdes acceso a tus credenciales de Google/Slack/etc dentro de n8n.</span>
N8N_ENCRYPTION_KEY=IsXnOohoz1UpSirWZfPrYD7YMp+UgLYHWS8+buDKJhgXyj9Mlb20B6eCBINEc6Sn7VSoquwdwAd5cF/dM4PUSw==</code></pre>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- Render Deployment Steps Section -->
        <section class="mb-20">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold mb-4">
                    <i class="fas fa-cloud-upload-alt text-purple-400 mr-3"></i>
                    Deploy en Render
                </h2>
                <p class="text-xl text-gray-400">Gu√≠a paso a paso para desplegar en Render.com</p>
            </div>

            <div class="card rounded-xl p-8 mb-8">
                <div class="warning-box mb-6">
                    <div class="flex items-start gap-4">
                        <i class="fas fa-info-circle text-3xl text-blue-400 flex-shrink-0"></i>
                        <div>
                            <h4 class="text-xl font-bold text-blue-400 mb-2">Importante sobre Render</h4>
                            <p class="text-gray-300 text-lg">
                                Render es excelente para comenzar, pero debes usar una base de datos PostgreSQL externa 
                                (Render Postgres o similar) para evitar la p√©rdida de datos. <strong class="text-yellow-400">Nunca uses SQLite en Render</strong>.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Step 1: Create Postgres -->
                <div class="mb-8">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-full bg-purple-600 flex items-center justify-center font-bold text-white">1</div>
                        <h3 class="text-2xl font-bold">Crear Base de Datos PostgreSQL</h3>
                    </div>
                    <div class="bg-gray-800/50 rounded-lg p-6 border border-gray-700">
                        <ol class="space-y-3 text-gray-300">
                            <li class="flex items-start gap-3">
                                <span class="text-purple-400 font-bold">1.</span>
                                <span>Ve a tu dashboard de Render y selecciona <strong class="text-blue-400">"New +"</strong> ‚Üí <strong class="text-blue-400">"PostgreSQL"</strong></span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-purple-400 font-bold">2.</span>
                                <span>Dale un nombre (ejemplo: <code class="bg-gray-900 px-2 py-1 rounded text-yellow-400">n8n-database</code>)</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-purple-400 font-bold">3.</span>
                                <span>Selecciona el plan Free o Starter seg√∫n tus necesidades</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-purple-400 font-bold">4.</span>
                                <span>Copia las credenciales de conexi√≥n (Internal Database URL)</span>
                            </li>
                        </ol>
                    </div>
                </div>

                <!-- Step 2: Deploy n8n -->
                <div class="mb-8">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center font-bold text-white">2</div>
                        <h3 class="text-2xl font-bold">Desplegar n8n como Web Service</h3>
                    </div>
                    <div class="bg-gray-800/50 rounded-lg p-6 border border-gray-700">
                        <ol class="space-y-3 text-gray-300">
                            <li class="flex items-start gap-3">
                                <span class="text-blue-400 font-bold">1.</span>
                                <span>Selecciona <strong class="text-blue-400">"New +"</strong> ‚Üí <strong class="text-blue-400">"Web Service"</strong></span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-blue-400 font-bold">2.</span>
                                <span>En "Docker", usa la imagen: <code class="bg-gray-900 px-2 py-1 rounded text-green-400">n8nio/n8n:latest</code></span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-blue-400 font-bold">3.</span>
                                <span>Dale un nombre (ejemplo: <code class="bg-gray-900 px-2 py-1 rounded text-yellow-400">n8n-app</code>)</span>
                            </li>
                        </ol>
                    </div>
                </div>

                <!-- Step 3: Environment Variables -->
                <div class="mb-8">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-full bg-green-600 flex items-center justify-center font-bold text-white">3</div>
                        <h3 class="text-2xl font-bold">Configurar Variables de Entorno</h3>
                    </div>
                    <div class="bg-gray-800/50 rounded-lg p-6 border border-gray-700">
                        <p class="text-gray-300 mb-4">En la secci√≥n de <strong class="text-blue-400">Environment Variables</strong>, agrega:</p>
                        <div class="bg-gray-900 rounded-lg p-4 font-mono text-sm space-y-2">
                            <div><span class="text-green-400">DB_TYPE</span>=<span class="text-yellow-300">postgresdb</span></div>
                            <div><span class="text-green-400">DB_POSTGRESDB_HOST</span>=<span class="text-yellow-300">[tu-host-de-render]</span></div>
                            <div><span class="text-green-400">DB_POSTGRESDB_PORT</span>=<span class="text-yellow-300">5432</span></div>
                            <div><span class="text-green-400">DB_POSTGRESDB_DATABASE</span>=<span class="text-yellow-300">[nombre-db]</span></div>
                            <div><span class="text-green-400">DB_POSTGRESDB_USER</span>=<span class="text-yellow-300">[usuario]</span></div>
                            <div><span class="text-green-400">DB_POSTGRESDB_PASSWORD</span>=<span class="text-yellow-300">[password]</span></div>
                            <div><span class="text-red-400">N8N_ENCRYPTION_KEY</span>=<span class="text-yellow-300">[genera-una-clave-segura]</span></div>
                            <div><span class="text-green-400">N8N_HOST</span>=<span class="text-yellow-300">[tu-dominio.onrender.com]</span></div>
                            <div><span class="text-green-400">N8N_PORT</span>=<span class="text-yellow-300">5678</span></div>
                            <div><span class="text-green-400">N8N_PROTOCOL</span>=<span class="text-yellow-300">https</span></div>
                            <div><span class="text-green-400">WEBHOOK_URL</span>=<span class="text-yellow-300">https://[tu-dominio.onrender.com]/</span></div>
                            <div><span class="text-green-400">GENERIC_TIMEZONE</span>=<span class="text-yellow-300">America/Mazatlan</span></div>
                            <div><span class="text-green-400">NODE_ENV</span>=<span class="text-yellow-300">production</span></div>
                        </div>
                        <div class="warning-box mt-4">
                            <p class="text-yellow-300">
                                <i class="fas fa-exclamation-triangle mr-2"></i>
                                <strong>Genera N8N_ENCRYPTION_KEY con:</strong> 
                                <code class="bg-gray-900 px-2 py-1 rounded ml-2">openssl rand -base64 32</code>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Deploy -->
                <div class="mb-8">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-full bg-yellow-600 flex items-center justify-center font-bold text-white">4</div>
                        <h3 class="text-2xl font-bold">Desplegar y Verificar</h3>
                    </div>
                    <div class="bg-gray-800/50 rounded-lg p-6 border border-gray-700">
                        <ol class="space-y-3 text-gray-300">
                            <li class="flex items-start gap-3">
                                <span class="text-yellow-400 font-bold">1.</span>
                                <span>Haz clic en <strong class="text-blue-400">"Create Web Service"</strong></span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-yellow-400 font-bold">2.</span>
                                <span>Espera a que el servicio est√© en estado <strong class="text-green-400">"Live"</strong></span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-yellow-400 font-bold">3.</span>
                                <span>Accede a tu URL de Render y completa la configuraci√≥n inicial de n8n</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-yellow-400 font-bold">4.</span>
                                <span>¬°Guarda tu <code class="bg-gray-900 px-2 py-1 rounded text-red-400">N8N_ENCRYPTION_KEY</code> en un lugar seguro!</span>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="success-box">
                    <div class="flex items-start gap-4">
                        <i class="fas fa-check-circle text-3xl text-green-400 flex-shrink-0"></i>
                        <div>
                            <h4 class="text-xl font-bold text-green-400 mb-2">¬°Listo para Producci√≥n! üéâ</h4>
                            <p class="text-gray-300 text-lg">
                                Tu instancia de n8n en Render ahora est√° conectada a PostgreSQL y tus datos est√°n seguros. 
                                Cada vez que Render reinicie el servicio, tus workflows y configuraciones permanecer√°n intactos.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <!-- Footer Section -->
        <section class="text-center py-12">
            <div class="card rounded-xl p-12 inline-block">
                <div class="text-6xl mb-6">üöÄ</div>
                <h3 class="text-3xl font-bold mb-4 gradient-text">¬°Tu arquitectura est√° lista!</h3>
                <p class="text-xl text-gray-400 mb-6 max-w-2xl">
                    Ahora tienes un sistema robusto, escalable y profesional para tus workflows de automatizaci√≥n
                </p>
                <div class="flex flex-wrap justify-center gap-4 mb-8">
                    <div class="flex items-center gap-2 bg-green-900/20 px-6 py-3 rounded-full border border-green-600/30">
                        <i class="fas fa-check-circle text-green-400"></i>
                        <span class="text-green-300 font-semibold">Persistencia garantizada</span>
                    </div>
                    <div class="flex items-center gap-2 bg-blue-900/20 px-6 py-3 rounded-full border border-blue-600/30">
                        <i class="fas fa-shield-alt text-blue-400"></i>
                        <span class="text-blue-300 font-semibold">Arquitectura segura</span>
                    </div>
                    <div class="flex items-center gap-2 bg-purple-900/20 px-6 py-3 rounded-full border border-purple-600/30">
                        <i class="fas fa-rocket text-purple-400"></i>
                        <span class="text-purple-300 font-semibold">Listo para producci√≥n</span>
                    </div>
                </div>
                <div class="text-gray-500 text-sm">
                    <i class="fas fa-code mr-2"></i>
                    Desarrollado con <span class="text-red-400">‚ô•</span> usando Docker, PostgreSQL y n8n
                </div>
            </div>
        </section>

    </div>

    <!-- Scroll to top button -->
    <button 
        onclick="window.scrollTo({top: 0, behavior: 'smooth'})" 
        class="fixed bottom-8 right-8 w-12 h-12 bg-gradient-to-br from-green-600 to-blue-600 rounded-full flex items-center justify-center shadow-lg hover:shadow-2xl transition-all duration-300 hover:scale-110 cursor-pointer"
        style="z-index: 1000;"
    >
        <i class="fas fa-arrow-up text-white text-xl"></i>
    </button>

</body>
</html>
